<% row_class = "" if local_assigns[:row_class].nil? %>

<tr id="<%= "film-#{film.id}" %>" class="<%= row_class %>">
  <td class="select-box"><%= check_box_tag "film_ids[]", film.id, false, class: "film-select" unless film.deleted? %></td>
  <td class="actions">
    <% if film.deleted == true %>
      <%= link_to restore_film_path(film), method: :patch, remote: true, id: "film-#{film.id}-restore" do %>
        <i class="fa fa-wrench"></i>
      <% end %>
    <% else %>
      <%= link_to edit_film_path(film), { :"data-toggle" => "modal", :"data-target" => "#forms-modal", id: "film-#{film.id}-edit" } do %>
        <i class="fa fa-edit"></i>
      <% end %>
      <% if film.phase == "stock" %>
        <%= link_to split_film_path(film), { :"data-toggle" => "modal", :"data-target" => "#forms-modal", id: "film-#{film.id}-split" } do %>
          <i class="fa fa-scissors"></i>
        <% end %>
      <% end %>
    <% end %>
  </td>
  <td class="serial">
    <strong><%= film.serial %></strong> <span class="label label-default"><%= film.formula %></span>
  </td>
  <td class="width">
    <%= film.width %>
    <%= (tag('br') + film.second_width.to_s) if film.try(:second_width) %>
  </td>
  <td class="length">
    <%= film.length %>
    <%= (tag('br') + film.second_length.to_s) if film.try(:second_length) %>
  </td>
  <td class="area">
    <%= number_with_precision(film.area, precision: 2) %> 
    <%= "<span class='label label-warning'>#{number_to_percentage(UtilizationCalculator.calculate(film.width, film.length, params[:min_width].to_f, params[:min_length].to_f), precision: 2)}</span>".html_safe if params[:min_width].present? && params[:min_length].present? %> 
    <% if film.try(:second_area) %>
      <%= (tag('br') + number_with_precision(film.second_area, precision: 2)) %>
      <%= "<span class='label label-warning'>#{number_to_percentage(UtilizationCalculator.calculate(film.second_width, film.second_length, params[:min_width].to_f, params[:min_length].to_f), precision: 2)}</span>".html_safe if params[:min_width].present? && params[:min_length].present? %> 
    <% end %>
  </td>
  <td class="shelf"><%= film.shelf %></td>
  <td class="order"><%= film.sales_order_code %>
    <% if film.order_fill_count > 1 && film.sales_order.present? %>
      <span class="badge"><%= film.order_fill_count %></span>
    <% end %>
  </td>
  <td class="note"><%= film.note %></td>
</tr>
