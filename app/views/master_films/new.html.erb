<%= modal_form_for @master_film do |f| %>
  <div class="modal-header">
    <h4 class="modal-title text-center">Enter film</h4>
  </div>
  <div class="modal-body">
    <%= f.text_field :serial, class: "form-control" %>
    <%= f.text_field :formula, class: "form-control" %>
    <%= f.number_field :mix_mass, step: "any", class: "form-control" %>
    <%= f.collection_select :machine_id, Machine.all, :id, :code, {}, class: "form-control" %>
    <%= f.text_field :film_code, class: "form-control" %>
    <%= f.text_field :thinky_code, class: "form-control" %>
    <%= f.select :chemist, User.chemists, { prompt: "Choose chemist..." }, class: "form-control" %>
    <%= f.select :operator, User.operators, { prompt: "Choose operator..." }, class: "form-control" %>
    <%= f.text_area :note, class: "form-control" %>
    <fieldset class="panel panel-warning">
      <div class="panel-heading"><h6 class="panel-title text-center">Defects</h6></div>
      <div class="panel-body">
        <div class="add-fields-link-wrapper form-group">
          <div class="col-md-offset-2 col-md-8">
            <%= link_to('#', class: "add-hstore-fields", data: { fields: render("new_defect_fields").gsub("\n", "") }) do %>
              <%= content_tag(:span, nil, class: "glyphicon glyphicon-plus") + "Add defect" %>
            <% end %>
          </div>
        </div>
      </div>
    </fieldset>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
    <%= f.submit "Add film", class: "btn btn-success" %>
  </div>
<% end %>
